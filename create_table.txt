create table JOB_TITLE(
	JOB_TITLE_ID			integer,
	JOB_TITLE_NAME			varchar(200) NOT NULL,
	primary key (JOB_TITLE_ID)
);

create table SOC(
	SOC_CODE				integer,
	SOC_NAME				varchar(100) NOT NULL,
	primary key (SOC_CODE)
);


create table PREVAILING_WAGES(
	PW_ID					integer,
	PREVAILING_WAGE	           		FLOAT,
	PW_UNIT_OF_PAY			varchar(10),
	PW_WAGE_LEVEL			varchar(10),
	PW_SOURCE				varchar(8) NOT NULL,
	PW_SOURCE_YEAR			integer,
	PW_SOURCE_OTHER		varchar(300),
	primary key (PW_ID),
	CHECK (PW_UNIT_OF_PAY IN ('Year','Month','Week','Hour'))
);

create table WAGES(
	WAGE_CASE_ID			integer,
	WAGE_RATE_OF_PAY_FROM	FLOAT NOT NULL,
	WAGE_RATE_OF_PAY_TO		FLOAT NOT NULL,
	WAGE_UNIT_OF_PAY		varchar(10) NOT NULL,
	primary key (WAGE_CASE_ID),
	CHECK (WAGE_UNIT_OF_PAY IN ('Year','Month','Week','Hour','Bi-Weekly'))

	
);


create table WORKSITE(
	WORKSITE_ID			integer,
	WORKSITE_CITY			varchar(50) NOT NULL,
	WORKSITE_COUNTY		varchar(50),
	WORKSITE_STATE			char(2) NOT NULL,
	WORKSITE_POSTAL_CODE	varchar(10) NOT NULL,
	primary key (WORKSITE_ID)
);


create table EMPLOYER_ADDRESS(
	EMPLOYER_ADDRESS_ID		integer,
	EMPLOYER_ADDRESS 	varchar(200) NOT NULL,
  EMPLOYER_POSTAL_CODE          VARCHAR(20) NOT NULL,
	EMPLOYER_CITY			varchar(50) NOT NULL,
  EMPLOYER_STATE			char(2) NOT NULL,
  EMPLOYER_POSTAL_CODE          VARCHAR(20) NOT NULL,
  EMPLOYER_COUNTRY		varchar(50) NOT NULL,
	EMPLOYER_PROVINCE		varchar(100),
	primary key (EMPLOYER_ADDRESS_ID)
);



create table AGENT_ATTORNEY(
	AGENT_ATTORNEY_ID			integer,
	AGENT_ATTORNEY_NAME			varchar(100) NOT NULL,
	AGENT_ATTORNEY_STATE			char(2) NOT NULL,
	AGENT_ATTORNEY_CITY			varchar(50) NOT NULL,
	primary key (AGENT_ATTORNY_ID)
);


create table NACIS(	
	NACIS_ID					integer unique,
	NACIS_CODE					varchar(8) NOT NULL,
	primary key (NACIS_ID)
);



create table H1B_REQUEST_RECORD(
	H1B_REQUEST_RECORD_ID		integer,
	TOTAL_WORKER				integer NOT NULL,
	NEW_EMPLOYER				integer NOT NULL,
	CONTINUED_EMPLOYMENT		integer NOT NULL,
	CHANGE_PREVIOUS_EMPLOYMENT	integer NOT NULL,
	NEW_CONCURRENT_EMPLOYMENT	integer NOT NULL,
	CHANGE_EMPLOYER			integer NOT NULL,
	AMENDED_PETITION			integer NOT NULL,
	primary key(H1B_REQUEST_RECORD_ID)
);


create table EMPLOYER(
	EMPLOYER_ID				integer,
	EMPLOYER_NAME				varchar(200),
	EMPLOYER_BUSINESS_NAME_DBA	varchar(100),
	NACIS_ID					integer unique,
	H1B_DEPENDENT				char(1),
	WILLFUL_VIOLATOR				char(1),
	SUPPORT_H1B				char(1),
	LABOR_CON_AGREE			char(1),
	primary key (EMPLOYER_ID),
	foreign key (NACIS_ID) references NACIS (NACIS_ID)
);

CREATE TABLE EMPLOYER_PHONE (
  EMPLOYER_PHONE_ID 		INTEGER,	
  EMPLOYER_ID			INTEGER,
  EMPLOYER_PHONE 		VARCHAR(15) NOT NULL,
	EMPLOYER_PHONE_EXT 		VARCHAR(8),
	PRIMARY KEY(EMPLOYER_PHONE_ID, EMPLOYER_ID),
	foreign key (EMPLOYER_ID) references EMPLOYER(EMPLOYER_ID)
	
);

create table CASES(
	CASE_NUMBER				integer,
	ORIGINAL_CERT_DATE			timestamp,
  EMPLOYMENT_START_DATE		timestamp NOT NULL,
	EMPLOYMENT_END_DATE			timestamp NOT NULL,
	CASE_STATUS				varchar(20),
	VISA_CLASS					varchar(16),
	JOB_TITLE_ID				integer,
	SOC_CODE					integer,
	FULL_TIME_POSITION_INDICATOR	char(1),
	PW_ID						integer,
	WAGE_CASE_ID				integer,
	primary key (CASE_NUMBER),
  foreign key (JOB_TITLE_ID) references JOB_TITLE (JOB_TITLE_ID),
	foreign key (SOC_CODE) references SOC (SOC_CODE),
	foreign key (PW_ID) references PREVAILING_WAGES(PW_ID),
	foreign key (WAGE_CASE_ID) references WAGES (WAGE_CASE_ID)
);
	
Create table WORKSITE_BOOK(
	CASE_NUMBER 				INTEGER,
	WORKSITE_ID 				INTEGER,
	PRIMARY KEY (CASE_NUMBER,WORKSITE_ID),
	FOREIGN KEY (CASE_NUMBER) REFERENCES CASES (CASE_NUMBER),
  FOREIGN KEY (WORKSITE_ID) REFERENCES WORKSITE (WORKSITE_ID)
);

CREATE TABLE EMPLOYER_ADDRESS_BOOK (
	EMPLOYER_ID 				INTEGER,
	EMPLOYER_ADDRESS_ID 			INTEGER,
	PRIMARY KEY ( EMPLOYER_ID,EMPLOYER_ADDRESS_ID),
	FOREIGN KEY (EMPLOYER_ID) REFERENCES EMPLOYER (EMPLOYER_ID),
  FOREIGN KEY (EMPLOYER_ADDRESS_ID) REFERENCES EMPLOYER_ADDRESS (EMPLOYER_ADDRESS_ID)
);

CREATE TABLE CASE_SUBMISSION (
	CASE_NUMBER 			INTEGER,
	EMPLOYER_ID 			INTEGER,
	CASE_SUBMITTED_DATE 		TIMESTAMP,
	DECISION_DATE 			TIMESTAMP,
	AGENT_REPRESENTING_STATUS char(1),
	AGENT_ATTORNY_ID 		INTEGER,
	PRIMARY KEY (CASE_NUMBER),
	FOREIGN KEY (CASE_NUMBER) REFERENCES CASES(CASE_NUMBER),
	FOREIGN KEY (EMPLOYER_ID) REFERENCES EMPLOYER(EMPLOYER_ID),
	FOREIGN KEY (AGENT_ATTORNEY_ID) REFERENCES AGENT_ATTORNEY (AGENT_ATTORNEY_ID)
);
	
CREATE TABLE H1B_RECORD_BOOK (
	EMPLOYER_ID 					INTEGER,
	H1B_REQUEST_RECORD_ID 			INTEGER,
	PRIMARY KEY ( EMPLOYER_ID,H1B_REQUEST_RECORD_ID),
	FOREIGN KEY (EMPLOYER_ID) REFERENCES EMPLOYER (EMPLOYER_ID),
	foreign key (H1B_REQUEST_RECORD_ID) references H1B_REQUEST_RECORD (H1B_REQUEST_RECORD_ID)
);
